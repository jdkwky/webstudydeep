<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
    </head>

    <body>
        <!-- <script>
            // function* test1() {
            //     const hello = yield 'hello';
            //     console.log(hello, 'hello')
            //     yield 'world';
            //     yield 'over';

            // }

            // const g = test1();
            // console.log(g.next())
            // console.log(g.next())
            // console.log(g.next())
            // console.log(g.next())

            // function* foo(x) {
            //     var y = 2 * (yield (x + 1));
            //     var z = yield (y / 3);
            //     return (x + y + z);
            // }

            // var b = foo(5);
            // b.next() // { value:6, done:false }
            // b.next(12) // { value:8, done:false }
            // b.next(13) // { value:42, done:true }

            // //  try catch
            
            // function normal(){
            //     try{

            //     }catch(err){
            //         console.log(err)
            //     }
            //     throw 'error'

            // }
            // normal();
            
            Promise.resolve(5).then(val=>{
                console.log(val,'val');
            })

            // generator 自执行函数
            function co(fn) {
                const gen = fn();
                const t = gen.next();
                return new Promise((resolve, reject) => {
                    function next(res) {
                        if (res.done) {
                            return resolve(res.value);
                        }
                        return Promise.resolve(res.value).then((val)=>{
                            res = gen.next(val);
                            next(res);
                        })
                    }
                    next(t);
                });
            }

            function* fn() {
                const hello = yield new Promise(resolve => {
                    resolve('hello');
                });
                console.log(hello, 'hello');
                const world = yield new Promise(resolve => {
                    setTimeout(() => {
                        resolve('world');
                    }, 1000);
                });
                console.log(world, 'world');
                return hello + world + 'over';
                console.log(hello + world + 'over', 'world');
            }

            // const result = co(fn);
            // result.then(res => {
            //     console.log(res);
            // });


            function *fnErr(){
                
                try{
                    yield '2222';
                    yield '8888';
                   
                }catch(err){
                    console.log(err, 'err');
                }
                throw 'rrrr';
                
            }
            const fnE = fnErr();
                // fnE.throw('rerer');
                console.log( fnE.next());
                console.log( fnE.next());
                console.log( fnE.next());
            // try{
                
            // }catch(e){
            //     console.log(e,'e');
            // }
        </script> -->
    
        <script>
            function *test (){
                try {
                    yield 'test'
                    throw 'eeee'
                }catch(err){
                    console.log(err,'error');
                }

                
            }

            var t = test();
            // t.throw('err');
            console.log(t.next());
            console.log(t.next());

        </script>
    </body>
</html>
